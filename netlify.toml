# netlify.toml

[build]
  command = "yarn install && yarn build"
  functions = ".netlify/functions"

[build.environment]
  NODE_VERSION = "20.12.2"

[functions]
  external_node_modules = ["express"]
  node_bundler = "esbuild"

[[redirects]]
  force = true
  from = "/api/*"
  status = 200
  to = "/.netlify/functions/api/:splat"

# Configurações para deploy local com Netlify CLI (mantendo como antes)
[dev]
  framework = "#custom"
  command = "yarn dev"
  targetPort = 3000
  publish = "dist"
  functions = "dist/.netlify/functions" # Ajustei para ser consistente com o build